OpenEmbedded/Yocto Distribution layer for Mentor Graphics
=========================================================

This layer holds the Mentor Embedded Linux distro configuration and
supplementary files, and acts as a staging area for changes which Mentor
Graphics requires, but which have not yet been merged into the upstream
layers.

This layer depends on:

URI: git://git.openembedded.org/openembedded-core
Branch: master

URI: git://git.openembedded.org/meta-openembedded
Revision: master


To bypass the meta-oe dependency:

    BBMASK = "/meta-mentor/recipes/busybox/"

Contributing
------------

Browse url: http://git.yoctoproject.org/cgit/cgit.cgi/meta-mentor
Clone url: git://git.yoctoproject.org/meta-mentor.git

To contribute to this layer you should the patches for review to the
mailing list.

Mailing list: meta-mentor@yoctoproject.org

When sending single patches, please use something like
'git send-email -1 --to meta-mentor@yoctoproject.org'

When sending a series, please use poky/meta/scripts/create-pull-request (aka
oe-core/scripts/create-pull-request).

Content Review
--------------

Distro bits
===========

    - base-files: issue files
    - netbase: adjusted default interfaces file
    - psplash: mel splash image
    - core-image-base: added package-management
    - e2fsprogs: killed e2fsprogs compat dep on blkid/badblocks
    - mel-release: used to archive up content for release
    - nfs-utils and packagegroup-core-nfs: prefer rpcbind, not portmap
    - other packagegroups

    - cml1-merge class: old crude implementation of defconfig file snippets,
      ala *.cfg in kernel-yocto, but also useful in regular kernels, since
      the kernel-yocto bits aren't generally useful (yet)
    - user_features class: easier user manipulation of DISTRO_FEATURES from
      local.conf
    - buildstats-summary class: using buildstats, show a summary at the end
      of the build showing how many recips ran do_populate_sysroot vs
      do_populate_sysroot_setscene
    - deploy-license-manifest class: this is fairly self explanatory. it deploys
      the manifest generated by license.bbclass into DEPLOY_DIR via an
      IMAGE_POSTPROCESS_COMMAND, and also runs a sed script which produces a
      CSV version of the manifest in DEPLOY_DIR also
    - kernel-lttng - automatically enable the kernel options needed to support
      lttng in any non-linux-yocto kernel
    - mirrors class: a much simplified, compact version of the upstream
      default mirrors, without location-specific mirrors, and with more use of
      regex to reduce the number of entries
    - sstate-reuse class: this should be renamed, but it provides a
      convenient mechanism to automatically check sstate mirrors in both the
      default sstate extra path, as well as specified fallback hosts for
      native recipes, and finally falls back to a flat layout. this means that
      a mirror can be populated with native sstate archives in a
      RedHatEnterprise-5 directory, and knowing we can run binaries from that
      host, it will check there on the mirror. Example:

          SSTATE_MIRROR_DISTROS += "RedHatEnterprise-5"
          SSTATE_MIRROR_SITES += "file:///cache/sstate http://my.server/sstate-cache"

    - isolated-sstate-dir class: link any used shared state archives into an
      isolated sstate directory, so we can distinguish between the contents of
      SSTATE_DIR and the sstate archives actually used for the build. This is
      needed by our release process.
    - package_early_expand class: work around self referential variable bug
      with SUMMARY and DESCRIPTION. Multiple packaging classes add a package
      name override, then getVar('SUMMARY', True). Yet the default values of
      SUMMARY_${PN}-dbg and friends refer to '${SUMMARY}'. So first
      SUMMARY_${PN}-dbg replaces SUMMARY, then SUMMARY is referring to itself.
      This class forces early expansion of the SUMMARY and DESCRIPTION
      variables to work around the issue. A proper fix would likely be to stop
      using package name OVERRIDES in the packaging classes.

To push upstream next
=====================

    - blktrace
    - libpcre
    - newt
    - perf
    - samba
    - tar
    - wireless-tools

    - cml1 class: fix menuconfig terminal type issue. The fundamental issue
      here is an ncurses-native relocation issue. The ncurses library is
      looking at the compiled-in search path for the terminfo database, and
      that path no longer exists, when using cached binaries (sstate). Export
      TERMINFO pointing at the current sysroot, so the attempt to run mconf is
      able to find the correct terminfo db.
    - `package_{ipk,rpm}`: avoid matching a pattern against `TARGET_OS`
      regarding the locale installation. It's not necessary, as the uclibc
      .conf files already handle this.

DSO Link Change
===============

    - shared-mime-info
    - wpa-supplicant

Parallel make / install
=======================

    - gettext
    - libtool
    - lttng2-ust
    - openssh

Lttng
=====

    - liburcu: patched for mips
    - lttng2-ust, lttng-{ust,tools,modules}:
      adjusted COMPATIBLE_HOST due to liburcu being patched for mips
      patches for improved tracing for MESA, etc
    - various kernel bbappends: improved tracing

Misc
====

    - busybox: dep on meta-oe's fbset-modes if CONFIG_FBSET=y
    - binutils-libs, oprofile: add and use more minimal binutils recipe for
                               oprofile. This recipe just builds libbfd and
                               libiberty
    - libffi: patches for mips o32/n32
    - boot-format: use a different repo with additional files
    - udev: retained 164 recipe for machines that still need it
